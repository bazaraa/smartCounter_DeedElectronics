<!Doctype html>

<html layout:decorator="shared/layout">
<head>
</head>
<body>

	<div layout:fragment="pageheader">
		<!-- BEGIN PAGE LEVEL STYLES -->
		<link rel="stylesheet" type="text/css"
			href="/assets/global/plugins/select2/select2.css"
			th:href="@{/assets/global/plugins/select2/select2.css}" />
		<link rel="stylesheet" type="text/css"
			href="/assets/global/plugins/datatables/extensions/Scroller/css/dataTables.scroller.min.css"
			th:href="@{/assets/global/plugins/datatables/extensions/Scroller/css/dataTables.scroller.min.css}" />
		<link rel="stylesheet" type="text/css"
			href="/assets/global/plugins/datatables/extensions/ColReorder/css/dataTables.colReorder.min.css"
			th:href="@{/assets/global/plugins/datatables/extensions/ColReorder/css/dataTables.colReorder.min.css}" />
		<link rel="stylesheet" type="text/css"
			href="/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css"
			th:href="@{/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css}" />
		<!-- END PAGE LEVEL STYLES -->

	</div>
	<div layout:fragment="content">
		<div class="portlet box blue">
			<div class="portlet-title">
				<div class="caption">
					<i class="fa fa-edit"></i>Хэрэглэгчийн бүртгэл
				</div>
				<div class="tools">
					<a href="javascript:;" class="collapse"></a>
				</div>
			</div>
			<div class="portlet-body">
				<div class="table-toolbar">
					<div sec:authorize="hasRole('USER_READ') or hasRole('ROLE_ADMIN')">
						<div class="row">
							<div class="col-md-12">
								<div class="portlet">
									<div class="portlet-title">
										<div class="caption">
											<span
												class="caption-subject bold font-grey-gallery uppercase">
												Хайх </span> <span class="caption-helper"> </span>
										</div>
										<div class="tools">
											<a href="#" class="collapse"> </a>
										</div>
									</div>
									<div class="portlet-body">
										<form th:action="@{/user/search}" class="form-horizontal"
											method="post" accept-charset="utf-8" autocomplete="off"
											enctype="multipart/form-data">
											<div class="col-md-2">
												<label>Байгууллага</label> <select
													class="form-control" name="organization">
													<option value="">Сонгох...</option>
													<option th:each="org : ${organizations}"
														th:value="${org.id}" th:text="${org.name}"
														th:attr="selected=${(organization == org.id) ? true : false}"></option>
												</select>
											</div>
											<div class="col-md-2">
												<label>Нэр</label> <input
													type="text" class="form-control" name="firstName"
													th:value="${firstname}" />
											</div>
											<div class="col-md-2">
												<label>Регистерийн дугаар</label>
												<input type="text" class="form-control" name="registerNum"
													th:value="${regnum}" />
											</div>
											<div class="col-md-2">
											<label>Регистерийн дугаар</label>
												<button type="submit" class="btn blue">Хайх</button>
											</div>
										</form>
									</div>
								</div>
							</div>
							<div class="col-md-12">
								<hr />
								<div class="col-md-2" style="padding: 0px; margin: 0px;">
									<div class="btn-group">
										<a id="users_editable_1_new"
											sec:authorize="hasRole('USER_CREATE') or hasRole('ROLE_ADMIN')"
											class="btn blue" th:href="@{/user}"> Шинээр нэмэх <i
											class="fa fa-plus"></i>
										</a>
									</div>
								</div>
								<div th:if="${#lists.isEmpty(users)}"
									class="clearfix alert alert-info">Тохирох өгөгдөл
									олдсонгүй</div>
								<table class="table table-striped table-hover table-bordered"
									th:if="${not #lists.isEmpty(users)}" id="users_editable_1">
									<thead>
										<tr>
											<th></th>
											<th>Хэрэглэгчийн нэр</th>
											<th>Нэр</th>
											<th>Овог</th>
											<th>Системийн хэрэглэгч</th>
											<th>Байгууллага</th>
											<th>Идэвхтэй эсэх</th>
											<th>Засах</th>
											<th>Устгах</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="user : ${users}">
											<td th:text="${user.id}"></td>
											<td th:text="${user.username}"></td>
											<td th:text="${user.firstName}"></td>
											<td th:text="${user.lastName}"></td>
											<td><span th:if="${user.sysUser}" checked="true">Тийм</span>
												<span th:unless="${user.sysUser}" checked="false">Үгүй</span>
											</td>
											<td
												th:text="${user.organization != null ? user.organization.name : ''}"></td>
											<td><span th:if="${user.active}" checked="true">Тийм</span>
												<span th:unless="${user.active}" checked="false">Үгүй</span>
											</td>
											<td style="text-align: center;"><a class="edit"
												sec:authorize="hasRole('USER_CREATE') or hasRole('ROLE_ADMIN')"
												th:href="@{'/user/' + ${user.id}}"><i
													class="fa fa-pencil-square-o fa-lg"></i></a></td>
											<td style="text-align: center;"><a class="delete"
												sec:authorize="hasRole('USER_DELETE') or hasRole('ROLE_ADMIN')"
												href="javascript:;"><i class="fa fa-trash fa-lg"></i></a></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div layout:fragment="pagefoot">
		<!-- BEGIN PAGE LEVEL PLUGINS -->
		<script type="text/javascript"
			src="/assets/global/plugins/select2/select2.min.js"
			th:src="@{/assets/global/plugins/select2/select2.min.js}"></script>
		<script type="text/javascript"
			src="/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"
			th:src="@{/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js}"></script>
		<script type="text/javascript"
			src="/assets/global/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js"
			th:src="@{/assets/global/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js}"></script>
		<script type="text/javascript"
			src="/assets/global/plugins/datatables/extensions/ColReorder/js/dataTables.colReorder.min.js"
			th:src="@{/assets/global/plugins/datatables/extensions/ColReorder/js/dataTables.colReorder.min.js}"></script>
		<script type="text/javascript"
			src="/assets/global/plugins/datatables/extensions/Scroller/js/dataTables.scroller.min.js"
			th:src="@{/assets/global/plugins/datatables/extensions/Scroller/js/dataTables.scroller.min.js}"></script>
		<script type="text/javascript"
			src="/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"
			th:src="@{/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js}"></script>
		<!-- END PAGE LEVEL PLUGINS -->
		<script src="/public/scripts/users.js"
			th:src="@{/public/scripts/users.js}"></script>

		<script>
			jQuery(document).ready(function() {
				usersTable.init();
			});
		</script>
	</div>

</body>
</html>